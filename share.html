<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Share Your Fishing Post</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    max-width: 700px;
    margin: auto;
    background: #fafafa;
    padding: 20px;
    color: #262626;
  }
  h2 {
    text-align: center;
    font-weight: 600;
    margin-bottom: 20px;
  }
  .post {
    background-color: white;
    border-radius: 14px;
    box-shadow: 0 5px 15px rgb(0 0 0 / 0.1);
    overflow: hidden;
    max-width: 650px;
    margin: 0 auto;
  }
  .post-header {
    display: flex;
    align-items: center;
    padding: 16px;
  }
  .post-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #3897f0;
    margin-right: 14px;
    background-color: #eee;
  }
  .post-userinfo {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .post-username {
    font-weight: 700;
    font-size: 1.15rem;
  }
  .post-email {
    font-size: 0.9rem;
    color: #8e8e8e;
  }
  .post-bio {
    font-size: 0.9rem;
    font-style: italic;
    color: #8e8e8e;
  }
  .post-image {
    width: 100%;
    max-height: 460px;
    object-fit: cover;
    display: block;
  }
  .post-caption {
    padding: 16px;
    font-size: 1rem;
    line-height: 1.4;
  }
  .post-caption div:not(:last-child) {
    margin-bottom: 8px;
  }
  .about-fish {
    margin-top: 12px;
    background-color: #f8f8f8;
    border-radius: 12px;
    padding: 12px;
    font-style: italic;
    color: #555;
  }
  .share-buttons {
    display: flex;
    gap: 12px;
    justify-content: center;
    padding: 12px 16px 24px 16px;
  }
  button.share-btn {
    flex: 1;
    padding: 12px 0;
    border: none;
    border-radius: 10px;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    color: white;
    transition: background-color 0.25s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  button.share-whatsapp {
    background-color: #25d366;
  }
  button.share-whatsapp:hover {
    background-color: #1da851;
  }
  button.share-facebook {
    background-color: #1877f2;
  }
  button.share-facebook:hover {
    background-color: #145dbf;
  }
  button.share-instagram {
    background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fd5949 45%, #d6249f 60%, #285aeb 90%);
    color: white;
  }
  button.share-instagram:hover {
    filter: brightness(1.1);
  }
  /* Simple SVG icons */
  svg.icon {
    width: 20px;
    height: 20px;
    fill: currentColor;
  }
</style>
</head>
<body>

<h2>Share Your Fishing Post</h2>

<div class="post" id="postPreview">
  <div class="post-header">
    <img id="profilePhoto" class="post-avatar" alt="Profile Photo" />
    <div class="post-userinfo">
      <span id="profileName" class="post-username"></span>
      <span id="profileEmail" class="post-email"></span>
      <span id="profileBio" class="post-bio"></span>
    </div>
  </div>
  <img id="postPhoto" class="post-image" alt="Fish Photo" />
  <div class="post-caption" id="postCaption"></div>
</div>

<div class="share-buttons">
  <button id="shareWhatsApp" class="share-btn share-whatsapp" title="Share to WhatsApp">
    <svg class="icon" viewBox="0 0 24 24"><path d="M20.52 3.48a11.303 11.303 0 00-16 0 10.989 10.989 0 00-3.3 12.989L2 22l5.642-1.474a11.027 11.027 0 0012.459-17.046zm-6.386 13.72c-1.548 0-2.767-.89-4.496-2.436l-.703-.671 1.319-1.25.75.71a7.812 7.812 0 002.746-1.429c.196-.204.353-.38.483-.537a.37.37 0 00-.155-.602 3.94 3.94 0 00-.722-.172 3.78 3.78 0 00-1.59.345 7.45 7.45 0 00-1.699 1.511c-.343.423-.692.83-1.04 1.215a.733.733 0 01-.463.23.178.178 0 01-.162-.097c-.18-.303-.718-1.06-1.003-1.42a3.345 3.345 0 01-.085-3.1 10.016 10.016 0 011.714-2.108 6.678 6.678 0 012.25-1.19 3.72 3.72 0 014.575.691.751.751 0 01-.016.99c-.206.234-.398.484-.595.75a.339.339 0 00-.088.217 5.527 5.527 0 001.006 1.328 3.351 3.351 0 011.943 3.3c-.06.536-.26 1.037-.586 1.488-.442.605-.962 1.02-1.562 1.245a3.918 3.918 0 01-1.988.5z"/></svg>
    WhatsApp
  </button>
  <button id="shareFacebook" class="share-btn share-facebook" title="Share to Facebook">
    <svg class="icon" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.595 0 0 .593 0 1.326v21.348C0 23.408.593 24 1.325 24h11.495v-9.294H9.843v-3.622h2.978V8.413c0-2.951 1.79-4.563 4.41-4.563 1.252 0 2.329.093 2.642.135v3.066h-1.813c-1.423 0-1.698.676-1.698 1.668v2.187h3.396l-.443 3.622h-2.953V24h5.787C23.407 24 24 23.408 24 22.674V1.325C24 .593 23.407 0 22.675 0z"/></svg>
    Facebook
  </button>
  <button id="shareInstagram" class="share-btn share-instagram" title="Share on Instagram">
    <svg class="icon" viewBox="0 0 24 24"><path d="M7 2c-2.757 0-5 2.243-5 5v10c0 2.757 2.243 5 5 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5H7zm0-2h10c3.866 0 7 3.134 7 7v10c0 3.866-3.134 7-7 7H7c-3.866 0-7-3.134-7-7V7c0-3.866 3.134-7 7-7z"/><circle cx="12" cy="12" r="3.2"/><circle cx="18.4" cy="6.2" r="1.2"/></svg>
    Instagram
  </button>
</div>

<script>
  const userProfile = JSON.parse(localStorage.getItem('userProfile')) || {};
  const fishData = JSON.parse(localStorage.getItem('fishData')) || {};

  // Show profile photo or fallback avatar letter
  const profilePhotoElem = document.getElementById('profilePhoto');
  if (userProfile.photo) {
    profilePhotoElem.src = userProfile.photo;
  } else {
    profilePhotoElem.style.backgroundColor = '#3897f0';
    profilePhotoElem.style.color = 'white';
    profilePhotoElem.style.fontWeight = '700';
    profilePhotoElem.style.fontSize = '1.5rem';
    profilePhotoElem.style.display = 'flex';
    profilePhotoElem.style.justifyContent = 'center';
    profilePhotoElem.style.alignItems = 'center';
    profilePhotoElem.textContent = (userProfile.name?.charAt(0) || 'U').toUpperCase();
  }

  document.getElementById('profileName').textContent = userProfile.name || 'User';
  document.getElementById('profileEmail').textContent = userProfile.email || '';
  document.getElementById('profileBio').textContent = userProfile.bio || '';

  const postPhotoElem = document.getElementById('postPhoto');
  if (fishData.photo) {
    postPhotoElem.src = fishData.photo;
    postPhotoElem.style.display = 'block';
  } else {
    postPhotoElem.style.display = 'none';
  }

  const unit = userProfile.unit || 'kg';
  const fishDescriptions = {
    "Rohu": "Rohu is a popular freshwater fish native to Indian rivers.",
    "Catla": "Catla is a large carp, prized for its flavor.",
    "Hilsa": "Hilsa is a migratory fish renowned for its unique taste.",
    // Add more descriptions if needed
  };

  document.getElementById('postCaption').innerHTML = `
    <div><strong>Species:</strong> ${fishData.species || ''}</div>
    <div><strong>Size:</strong> ${fishData.size || ''} ${unit}</div>
    <div><strong>Location:</strong> ${fishData.location || ''}</div>
    <div><small>Posted on: ${fishData.date ? new Date(fishData.date).toLocaleString() : ''}</small></div>
    <p class="about-fish">${fishDescriptions[fishData.species] || ''}</p>
  `;

  document.getElementById('shareWhatsApp').onclick = () => {
    if (!fishData.species) {
      alert('No post data to share!');
      return;
    }
    const text = `Check out my catch! ${fishData.species}, Size: ${fishData.size} ${unit}, Location: ${fishData.location}`;
    const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  document.getElementById('shareFacebook').onclick = () => {
    if (!fishData.species) {
      alert('No post data to share!');
      return;
    }
    const shareUrl = encodeURIComponent(location.href);
    const quote = encodeURIComponent(`Check out my catch! ${fishData.species}, Size: ${fishData.size} ${unit}, Location: ${fishData.location}`);
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${quote}`, '_blank');
  };

  // Instagram sharing requires native app; show alert or guide
  document.getElementById('shareInstagram').onclick = () => {
    alert('Instagram sharing is not supported directly. Please save your image and share it in Instagram Stories or feed.');
  };
</script>

</body>
</html>