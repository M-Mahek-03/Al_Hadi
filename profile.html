<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>User Profile</title>
<style>
  /* Simple form styling */
  body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
  label { margin-top: 15px; display: block; font-weight: bold; }
  input, textarea, select, button { width: 100%; padding: 8px; margin-top: 5px; }
  button { margin-top: 20px; background: #007bff; color: white; border: none; cursor: pointer; }
  button:hover { background: #0056b3; }
</style>
</head>
<body>

<h2>User Profile</h2>

<form id="profileForm">
  <label for="name">Name</label>
  <input id="name" type="text" required placeholder="Enter your name"/>

  <label for="email">Email</label>
  <input id="email" type="email" required placeholder="Enter your email" />

  <label for="profilePic">Profile Picture (optional)</label>
  <input id="profilePic" type="file" accept="image/*"/>

  <label for="bio">About Me</label>
  <textarea id="bio" rows="4" placeholder="Tell us about yourself"></textarea>

  <button type="submit">Save & Continue</button>
</form>

<script>
  const profileForm = document.getElementById('profileForm');
  profileForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = e.target.name.value.trim();
    const email = e.target.email.value.trim();
    const bio = e.target.bio.value.trim();
    let photo = '';

    const file = e.target.profilePic.files[0];
    if (file) {
      photo = await new Promise(resolve => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.readAsDataURL(file);
      });
    } else {
      photo = '';
    }

    const profileData = { name, email, bio, photo };
    localStorage.setItem('userProfile', JSON.stringify(profileData));

    // Proceed to next page
    window.location.href = 'fish.html';
  });

  // Prefill form if data exists
  window.addEventListener('DOMContentLoaded', () => {
    const savedProfile = JSON.parse(localStorage.getItem('userProfile'));
    if (savedProfile) {
      document.getElementById('name').value = savedProfile.name || '';
      document.getElementById('email').value = savedProfile.email || '';
      document.getElementById('bio').value = savedProfile.bio || '';
    }
  });
</script>

</body>
</html>